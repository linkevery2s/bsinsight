<html>
	<head><title>作ろう！防災ガイド</title>
	<meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" >
    <link href="css/leaflet.css" rel="stylesheet">
    <link href="../assets/css/font-awesome.min.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <script src="libs/leaflet-src.js"></script>
    <link rel="stylesheet" href="libs/leaflet.css"/>
	<script type ="text/javascript" src="js/map.js"></script>
	<script type ="text/javascript" src="js/leaflet.js"></script>
    <script src="src/Leaflet.draw.js"></script>
    <script src="src/Leaflet.Draw.Event.js"></script>
    <link rel="stylesheet" href="src/leaflet.draw.css"/>
    <script src="src/Toolbar.js"></script>
    <script src="src/Tooltip.js"></script>
    <script src="src/ext/GeometryUtil.js"></script>
    <script src="src/ext/LatLngUtil.js"></script>
    <script src="src/ext/LineUtil.Intersect.js"></script>
    <script src="src/ext/Polygon.Intersect.js"></script>
    <script src="src/ext/Polyline.Intersect.js"></script>
    <script src="src/ext/TouchEvents.js"></script>
    <script src="src/draw/DrawToolbar.js"></script>
    <script src="src/draw/handler/Draw.Feature.js"></script>
    <script src="src/draw/handler/Draw.SimpleShape.js"></script>
    <script src="src/draw/handler/Draw.Polyline.js"></script>
    <script src="src/draw/handler/Draw.Circle.js"></script>
    <script src="src/draw/handler/Draw.Marker.js"></script>
    <script src="src/draw/handler/Draw.Polygon.js"></script>
    <script src="src/draw/handler/Draw.Rectangle.js"></script>
    <script src="src/edit/EditToolbar.js"></script>
    <script src="src/edit/handler/EditToolbar.Edit.js"></script>
    <script src="src/edit/handler/EditToolbar.Delete.js"></script>
    <script src="src/Control.Draw.js"></script>
    <script src="src/edit/handler/Edit.Poly.js"></script>
    <script src="src/edit/handler/Edit.SimpleShape.js"></script>
    <script src="src/edit/handler/Edit.Circle.js"></script>
    <script src="src/edit/handler/Edit.Rectangle.js"></script>
    <script src="src/edit/handler/Edit.Marker.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-117120155-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-117120155-1');
</script>

    <link rel="apple-touch-icon" href="../images/apple-touch-icon.png">
    <link rel="shortcut icon" href="../images/apple-touch-icon.png">
<script>
var num = 1;
function add(){
	num++;
	
var limit = 20;
if(num > limit){ 
return false;
}
    var div_element = document.createElement("div");
    div_element.innerHTML = '<textarea name="contents" rows="2" style="border:0; width:100%; font-size: 120%;">・</textarea><br>';
    var parent_object = document.getElementById("piyo");
    parent_object.appendChild(div_element);
}
</script>
	<script type="text/javascript">
	var rememberPositionedInCookie = true;
	var rememberPosition_cookieName = '防災ガイド';
	</script>	
	<style>
	.drag-and-drop {
    	cursor: move;
    	position: absolute;
    	z-index: 1000;
	}

	.drag {
	    z-index: 1001;
	}

#map_canvas{

width:100%;

height:100%;

min-height:100%;

margin: 0;

overflow: hidden;

}

#hinan{
	width: 600px;
	height: 500px;
}

#bikou, #piyo{
	width: 600px;
}

@media (max-width: 767px) {
#hinan{
	width: 370px;
	height: 400px;
}

#bikou, #piyo{
	width: 90%;
}

}

@media print{
.leaflet-bar .leaflet-control-draw-measure {
  display:none;
}
.noprint{
  display:none;
}

.comment, .text_button{
  display:none;
}


.leaflet-control-zoomhome {
  display:none;
}

.leaflet-control-zoom {
  display:none;
}

.leaflet-draw-toolbar {
  display:none;
}
#export {
  display:none;
}
.leaflet-bookmarks-control {
  display:none;
}
.leaflet-control-filelayer {
  display:none;
}
.leaflet-control-layers {
  display:none;
}

}
	</style>
	</head>
  <body onload="map_ini()">
  <div id ="keitai">
  <span style="float: right;" class="text_button"><button type="button" onclick="location.href = '../index.html#guide'">戻　る</button></span>
	<h1><textarea style="font-size:0.8em; border:0; width: 90%;" name="title" rows="1">タイトルを入力</textarea></h1>
	<div class="comment">
	<button type="button" onclick="print(); return false;"><i class="fa fa-print" aria-hidden="true"></i>  印　刷</button>
		<button onclick="add();" class="text_button"><i class="fa fa-list-ul" aria-hidden="true"></i>  リスト追加</button>
	</div>
	
	<div class="drag-and-drop" id="hinan">
	避難所までのルート
	<div id ="map_canvas"></div>
	</div>
	<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
	<div class="drag-and-drop" id="bikou">
	<textarea style="font-size:120%; border:0; width: 100%;" name="bikou" rows="10">気づいたこと・危険個所</textarea>
	</div>

	<br><br><br><br><br>
	<div id="piyo" class="drag-and-drop">
	非常時持ち出しリスト
	</div>

	</div>


<script type="text/javascript">
(function(){

    //要素の取得
    var elements = document.getElementsByClassName("drag-and-drop");
    var x;
    var y;

    for(var i = 0; i < elements.length; i++) {
        elements[i].addEventListener("mousedown", mdown, false);
        elements[i].addEventListener("touchstart", mdown, false);
    }

    function mdown(e) {
        this.classList.add("drag");
        if(e.type === "mousedown") {
            var event = e;
        } else {
            var event = e.changedTouches[0];
        }

        x = event.pageX - this.offsetLeft;
        y = event.pageY - this.offsetTop;

        document.body.addEventListener("mousemove", mmove, false);
        document.body.addEventListener("touchmove", mmove, false);
    }

    function mmove(e) {

        var drag = document.getElementsByClassName("drag")[0];

        if(e.type === "mousemove") {
            var event = e;
        } else {
            var event = e.changedTouches[0];
        }

        e.preventDefault();

        drag.style.top = event.pageY - y + "px";
        drag.style.left = event.pageX - x + "px";

        drag.addEventListener("mouseup", mup, false);
        document.body.addEventListener("mouseleave", mup, false);
        drag.addEventListener("touchend", mup, false);
        document.body.addEventListener("touchleave", mup, false);

    }

    function mup(e) {
        var drag = document.getElementsByClassName("drag")[0];

        document.body.removeEventListener("mousemove", mmove, false);
        drag.removeEventListener("mouseup", mup, false);
        document.body.removeEventListener("touchmove", mmove, false);
        drag.removeEventListener("touchend", mup, false);

        drag.classList.remove("drag");
    }

})()
</script>

</body>
</html>
